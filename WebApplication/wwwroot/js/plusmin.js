$(document).ready(function () { function t(t, a) { try { $.ajax({ type: "POST", url: a < 0 ? "/Cart/DecreaseCartItem" : "/Cart/IncreaseCartItem", data: { cartDetailsId: t, amount: Math.abs(a) }, success: function () { window.location.href = "/Cart/CartIndex" }, error: function () { window.location.reload() } }) } catch (n) { alert(n) } } $(".minus-btn").click(function () { t($(this).data("cart-id"), -1) }), $(".plus-btn").click(function () { t($(this).data("cart-id"), 1) }), $(".count-input").each(function () { var a = this, n = parseInt($(this).attr("max")); a.addEventListener("input", function () { var c = parseInt(a.value); c <= 0 || isNaN(c) ? a.value = 1 : c > n ? a.value = n : t($(a).data("cart-id"), c - n) }) }) });